
### **Zenith 项目：开发计划**

#### **核心开发流程**

1.  **原型驱动**: 前端使用静态数据快速构建完整、可交互的产品原型。
2.  **原型即设计**: 团队基于此原型进行评审和确认，锁定最终的 UI/UX。
3.  **功能实现**: 逐个模块替换原型中的静态数据，对接后端实现的真实 API。

---

### **第一阶段：地基与高保真原型**

*   **阶段目标**: 交付一个功能完整、可交互、但使用假数据的产品原型，并完成后端的基础架构搭建。

*   **前端任务清单**:
    *   **项目设置**: 初始化 Vite + React + AntD 项目，配置好路由、全局状态、API 客户端。
    *   **Mock 数据层**: 创建 `_mock` 目录，编写用户、项目、任务、日记的静态 JSON 数据。
    *   **页面原型构建**:
        *   `登录页`: 实现二维码展示界面。
        *   `新用户资料填写页`
        *   `管理员审批页`
        *   `主界面框架`: 包含侧边栏导航和主内容区。
        *   `项目看板/列表页`: 实现任务卡片的展示与拖拽交互。
        *   `任务详情抽屉`: 展示任务细节、子任务和评论区。
        *   `日记流页面`
        *   `日记详情页`
        *   `日记创建/编辑页`: 集成 Markdown 编辑器。

*   **后端任务清单**:
    *   **项目设置**: 初始化 FastAPI 项目，配置好 `uv` 环境、CORS 策略、数据库连接。
    *   **架构搭建**:
        *   实现全局异常处理中间件。
        *   实现请求日志记录。
    *   **API 体系**:
        *   定义 V1 版的 OpenAPI 规范草案。
        *   实现 JWT 的生成与校验核心逻辑。
        *   设计可扩展的权限校验依赖项。

---

### **第二阶段：用户与认证功能实现**

*   **阶段目标**: 完成真实的用户登录、审批流程，替换原型中所有与用户和管理员相关的假数据。

*   **后端任务清单**:
    *   **数据库**: 实现 `User` 表的数据库模型。
    *   **API 实现**:
        *   扫码登录认证的全套 API (`/auth/...`)。
        *   获取和更新当前用户信息的 API (`/users/me`)。
        *   管理员获取待审批用户、批准用户的 API (`/admin/...`)。
        *   合同到期提醒的查询 API (`/reminders/...`)。

*   **前端任务清单**:
    *   **API 对接**:
        *   对接真实的扫码登录流程。
        *   根据 `/users/me` 返回的用户状态，实现正确的页面跳转和权限控制。
        *   对接管理员审批页面的数据。
        *   在管理员视图中调用并展示合同提醒信息。

---

### **第三阶段：核心任务系统实现**

*   **阶段目标**: 完成真实的项目、任务协作功能，让产品的核心价值可用。

*   **后端任务清单**:
    *   **数据库**: 实现 `Project`, `Task`, `ProjectMembership` 表的数据库模型。
    *   **API 实现**:
        *   项目管理的 CRUD API，包括项目成员管理。
        *   任务和子任务的 CRUD API。
        *   在所有相关接口中，实现基于“项目成员”的严格权限校验。

*   **前端任务清单**:
    *   **API 对接**:
        *   对接项目列表和项目设置页面的数据。
        *   对接任务看板/列表页的数据。
        *   对接任务详情抽屉的数据。
    *   **实现真实操作**:
        *   确保项目的创建、成员邀请能真实调用后端。
        *   确保任务的创建、状态拖拽、指派能真实调用后端。

---

### **第四阶段：日记系统实现与发布准备**

*   **阶段目标**: 完成最后一个功能模块的对接，并进行整体优化，准备内部发布。

*   **后端任务清单**:
    *   **数据库**: 实现 `DiaryEntry`, `Comment` 等相关数据库模型。
    *   **API 实现**:
        *   日记的 CRUD API，包含复杂的可见性权限过滤逻辑。
        *   通用的评论功能 API。
    *   **优化与部署**:
        *   审查并优化数据库查询性能。
        *   完成最终的压力测试和错误处理加固。
        *   **编写最终的、清晰的后端部署文档**。

*   **前端任务清单**:
    *   **API 对接**:
        *   对接日记流和日记详情页的数据。
        *   对接评论功能。
    *   **优化与测试**:
        *   进行全面的性能优化和 Bug 修复。
        *   进行跨浏览器和响应式布局的最终测试。
        *   设计并实现所有列表的“空状态”和“加载中”状态。